--- IEC104/test/main.c.orig	2025-12-11 15:22:18.833913634 +0800
+++ IEC104/test/main.c	2025-12-11 15:27:10.180836292 +0800
@@ -16,6 +16,7 @@
 #include "errno.h"
 #include "sys.h"
 #include "main.h"
+#include <signal.h>
 
 pthread_mutex_t mutex;
 pthread_mutex_t mutex2;
@@ -61,12 +62,12 @@
 
     int socketfd = (*(int *)arg);
     while(1){
-        //pthread_mutex_lock(&mutex2);
         Iec10x_Scheduled(socketfd);      
         Iec104_StateMachine();
-        //pthread_mutex_lock(&mutex2);
+        usleep(5000000);                // æ¯ 5 ç§’æ‰§è¡Œä¸€æ¬¡ï¼Œé™ä½æµ‹è¯•å¸§é¢‘ç‡
+        pthread_testcancel();           // âœ… ğŸ”¥ å…è®¸ä¸»çº¿ç¨‹ cancel å®ƒ
     }
-    return ((void *)0); 
+    return NULL;
 }
 
